# 取反

## 1. 概念定义

### 1）按位取反

取反也就是按位取反，顾名思义就是按二进制位进行“取反”操作。



取反运算符 `~` 是一个单目位运算符，也就是只有一个操作数，表示为 `~x`。其功能是将一个数的全部二进制位从 0 变成 1，1 变成 0。



比如：~3 = -4

```
3 ：00000011
      11111100（取反后的补码）
      10000011（反码）
      10000100（原码）
```



注意：这里的按位取反和原码转反码时的取反不一样，按位取反时是所有的二进制位都会取反（包括符号位），原码转反码时是不包括符号位的。

### 2）应用

#### a. 相反数

一个正数 x 的相反数的补码就是 x 原码取反加一，即 -x = ~x + 1。



比如：3 的相反数为 -3

```
3 ：00000011（原码）
      11111100（取反后）
      11111101（加一后的补码）
      10000010（反码）
      10000011（原码）
```



#### b. 代替减法

不用减号来实现减法。



一个减法式子可以转换成加法式子，比如 x-y 可以写成 x+(-y)，那么由上一个应用可知，-y 可以表示成 y 的相反数，即可用 ~y+1 来表示，所以 x-y 可用 x+(~y+1) 来表示。



比如：3-5 = -2

```
5 ：00000101
      11111010
      11111011（-5 的补码）
      
3  ：00000011
-5：11111011
       11111110（3+(-5)的补码）
       10000001（反码）
       10000010（原码）
```



#### c. 代替加法

可用使用 `~` 来代替减法，也可以来代替加法。



x+y 也可以写成一个减法式子 x-(-y)，即可写成 x-(~y+1)。

## 2. 题目练习

| 题目链接                                                     | 备注 |
| ------------------------------------------------------------ | ---- |
| [插入](https://leetcode-cn.com/problems/insert-into-bits-lcci/) |      |

## 3. 解题报告

[插入](https://leetcode-cn.com/problems/insert-into-bits-lcci/)

**题目描述**

> 给定两个整型数字 `N` 与 `M`，以及表示比特位置的 `i` 与 `j`（`i <= j`，且从 0 位开始计算）。
>
> 编写一种方法，使 `M` 对应的二进制数字插入 `N` 对应的二进制数字的第 `i ~ j` 位区域，不足之处用 `0` 补齐。具体插入过程如图所示。
>
> ![img](https://pic.leetcode-cn.com/1610104070-NuLVQi-05.01.gif)
>
> 题目保证从 `i` 位到 `j` 位足以容纳 `M`， 例如： `M = 10011`，则 `i～j` 区域至少可容纳 5 位。

**解题思路**

先将 i 到 j 位的二进制位都置为 0，随后再将 M 左移 i 位，与 N 进行或操作即可。

将指定位置 0 时可以用到 与 和 取反 操作，将 1 左移到指定的位数，然后取反就变为 0，再与上 N 就可以将 N 的指定位变成了 0。

而后将 M 左移 i 位，这样 M 的二进制位就与 N 的 i 到 j 位的二进制位对齐了，进行或操作就可以将该段二进制位置全部转为 M 的二进制。

**Java代码**

```java
class Solution {
    public int insertBits(int N, int M, int i, int j) {
        for (int k = i; k <= j; k++) {
            N &= ~(1 << k);
        }
        return N | (M << i);
    }
}
```

