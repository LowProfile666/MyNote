​	

# 位与

## 1. 概念定义

### 1）按位与

位与也就是按位与，顾名思义就是按二进制位进行“与”操作。



按位与运算符 `&` 是一个双目运算符，其功能是将参与运算的两数各对应的二进位相与。参与运算的两个数均以补码出现。



按位与的规则：==有 0 为 0，全 1 为 1==。如下：

```java
1 & 1 = 1;
1 & 0 = 0;
0 & 1 = 0;
0 & 0 = 0;
```



由上可得一些性质：

+ 任何数 位与 1，还是它本身。
+ 任何数 位与 0，都是 0。



比如，3 & 5 = 1

```java
3 ：		011
5 ：	&   101
   ----------
    	 001
```



### 2）应用

根据位与的运算规则，位与操作可以应用于很多的场合。

#### a. 判断一个数的k位是0是1

要想判断第 k 位是 0 还是 1，只需要将第 k 位的数和 1 进行与操作即可，如果结果是 1，那么 k 位就是 1，否则就是 0。



比如：判断 133 的第 5 位是 0 还是 1，应该这样写：

```java
133 & 0b10000
```

`0b` 开头表示是一个二进制数，这个二进制数的第五位是 1，这样 133 的第五位就会和 1 进行 `&` 操作。如果整个结果等于 0，那么第五位上是 0；如果结果不等于 0，那么第五位上是 1，此时结果是 2^k-1^。



#### b. 判断一个数的奇偶

一个数的二进制位的最低位是 1，则是奇数；是 0，则是偶数。根据上一个应用的原理，可以直接让一个数和 1 就行 `&` 操作即可。



比如：判断 n 是奇数还是偶数，应该这样写：

```java
if (n & 1 == 1)
    // 奇数
if (n & 1 == 0)
    // 偶数
```

这里的 `1` 写成 `0b1` 都是一样的。



#### c. 保留低 n 位

保留低 n 位意思就是，保留一个数的低 n 位，高位清零。

比如二进制数 `0b000001010` 的低 3 位就是 `0b010`。通过和 1 进行 `&` 操作可以保留指定的位数。



比如：保留 123 的末尾 3 位，用十进制输出，应该这样写：

```java
System.out.println(123 & 0b111);
```

结果为：3。



#### d. 清零低 n 位

清零低 n 位就是将低 n 位全部转换成 0，**但是，其他的位不能改变**。

由上可知：通过和 0 进行 `&` 操作可以清零指定的位数，通过和 1 进行 `&` 操作可以保留指定的位数。



比如：清零 123 的末尾 3 位，用十进制输出，应该这样写：

```java
System.out.println(123 & 0b11111111111111111111111111111000);
// 因为 123 是 int 类型，有 32 个二进制位，所以要保留前 29 位，清零后 3 位，就必须写成 0b11111111111111111111111111111000
```

结果为：120。



但是上面这样写太麻烦而且容易出错，所以一般使用十六进制的写法。那把 `0b11111111111111111111111111111000` 转成十六进制就是：`0xFFFFFFF8`，所以可以这样写：

```java
System.out.println(123 & 0xFFFFFFF8);
// 实际上操作的依旧是二进制，只是换种写法
```

结果为：120。



到这我们可以发现，保留低 n 位也可以看作清零高位，因为 `&0b111` 就等于 `&0b00000000000000000000000000000111`。

所以，对于每个二进位来说：

+ 清零：`&0`
+ 保留：`&1`



#### e. 判断是否是2的幂

一个数如果是 2 的幂，那么这个数的二进制位上一定只有一个 1。假设 n 是 2 的 k 次幂，那么第 k+1 个二进制上就是 1，其余都是 0。那么 n-1 后，二进制位上第 k+1 位变成了 0，后面的 k 个二进制位都是 1。

那么判断 n 是否是 2 的幂，只需将 n 和 n-1 进行 `&` 操作，结果是 0，则是；否则，不是。



比如：8 是 2 的 3 次幂：

```
8 ：		00001000
7 ：	 &  00000111
	  --------------
	     00000000
```



所以判断一个数是否是 2 的幂可以这样写：

```java
if ((n & (n-1) )== 0)
    // 是
else
    // 否
```



## 2. 题目练习

| 题目链接                                                     | 备注 |
| ------------------------------------------------------------ | ---- |
| [位1的个数](https://leetcode-cn.com/problems/number-of-1-bits/) |      |
| [二进制中1的个数](https://leetcode-cn.com/problems/er-jin-zhi-zhong-1de-ge-shu-lcof/) |      |
| [根据数字二进制下 1 的数目排序](https://leetcode-cn.com/problems/sort-integers-by-the-number-of-1-bits/) |      |
| [二进制表示中质数个计算置位](https://leetcode-cn.com/problems/prime-number-of-set-bits-in-binary-representation/) |      |
| [2 的幂](https://leetcode-cn.com/problems/power-of-two/)     |      |



## 3. 解题报告

[位1的个数](https://leetcode-cn.com/problems/number-of-1-bits/)

**题目描述**

> 编写一个函数，输入是一个无符号整数（以二进制串的形式），返回其二进制表达式中数字位数为 '1' 的个数（也被称为[汉明重量](https://baike.baidu.com/item/汉明重量)）。
>
>  
>
> **提示：**
>
> - 请注意，在某些语言（如 Java）中，没有无符号整数类型。在这种情况下，输入和输出都将被指定为有符号整数类型，并且不应影响您的实现，因为无论整数是有符号的还是无符号的，其内部的二进制表示形式都是相同的。
> - 在 Java 中，编译器使用[二进制补码](https://baike.baidu.com/item/二进制补码/5295284)记法来表示有符号整数。因此，在 **示例 3** 中，输入表示有符号整数 `-3`。



**解题思路**

循环判断每一位是否为 1，同时使用 `&` 和 `>>` 操作。



**Java代码**

```java
public class Solution {
    // you need to treat n as an unsigned value
    public int hammingWeight(int n) {
        int res = 0;
        for (int i = 0; i < 32; i++) {
            if (((n>>i) & 1) == 1)
                res++;
        }
        return res;
    }
}
```

